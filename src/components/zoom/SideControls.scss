@use "../../styles/variables" as vars;

.side-controls.floating-controls {
  position: fixed;
  z-index: vars.$z-zoom-controls;
}

.side-controls {
  --side-control-size: #{vars.$zoom-button-size};
  --side-control-gap: #{vars.$space-8};
  bottom: vars.$floating-panel-offset;
  right: vars.$floating-panel-offset;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: var(--side-control-gap);
}

.view-tools-group,
.mini3d-tools-group,
.measurement-tools-group {
  display: flex;
  flex-direction: row-reverse;
  align-items: center;
  gap: var(--side-control-gap);
}

.view-tools-secondary,
.mini3d-tools-secondary,
.measurement-tools-secondary {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: var(--side-control-gap);
  max-width: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-width vars.$duration-medium vars.$ease-out,
    opacity vars.$duration-fast vars.$ease-out;
}

.view-tools-group.expanded .view-tools-secondary {
  max-width: calc(var(--side-control-size) * 4 + var(--side-control-gap) * 3);
  /* dynamic size for 4 buttons */
  overflow: visible;
  opacity: 1;
  transition:
    max-width vars.$duration-slow vars.$ease-out,
    opacity vars.$duration-fast vars.$ease-in;
}

.mini3d-tools-group.expanded .mini3d-tools-secondary {
  max-width: calc(var(--side-control-size) * 5 + var(--side-control-gap) * 4);
  /* dynamic size for 5 buttons */
  overflow: visible;
  opacity: 1;
  transition:
    max-width vars.$duration-slow vars.$ease-out,
    opacity vars.$duration-fast vars.$ease-in;
}

.side-control.mini3d-high-resource-toggle {
  position: relative;
}

.side-control.mini3d-high-resource-toggle::after {
  content: "HQ";
  position: absolute;
  right: 2px;
  bottom: 2px;
  padding: 1px 2px;
  border-radius: 4px;
  background: rgba(12, 16, 24, 0.82);
  color: #ffffff;
  font-size: 0.42em;
  font-weight: 700;
  letter-spacing: 0.03em;
  line-height: 1;
  pointer-events: none;
}

.side-control.mini3d-high-resource-toggle.mode-lq::after {
  content: "LQ";
  background: rgba(12, 16, 24, 0.74);
  color: #ffd48f;
}

.measurement-tools-group.expanded .measurement-tools-secondary {
  max-width: calc(var(--side-control-size) * 2 + var(--side-control-gap));
  /* dynamic size for 2 buttons */
  overflow: visible;
  opacity: 1;
  transition:
    max-width vars.$duration-slow vars.$ease-out,
    opacity vars.$duration-fast vars.$ease-in;
}

.side-control.view-group-toggle,
.side-control.measurement-group-toggle {
  transition: color vars.$duration-fast vars.$ease-standard;
}

.side-control.view-group-toggle.open,
.side-control.measurement-group-toggle.open {
  color: vars.$color-text-faint;
}

.side-control.view-group-toggle.open:hover,
.side-control.measurement-group-toggle.open:hover {
  color: vars.$color-text-dim;
}

.side-control.view-group-toggle.open.active,
.side-control.measurement-group-toggle.open.active {
  color: vars.$color-accent-muted;
}

@media (max-width: 1024px) {
  .side-controls {
    --side-control-size: 40px;
    --side-control-gap: #{vars.$space-6};
    bottom: vars.$floating-panel-offset-sm;
    right: vars.$floating-panel-offset-sm;
  }
}

@media (max-width: 768px) {
  .side-controls {
    --side-control-size: 34px;
    --side-control-gap: #{vars.$space-4};
  }
}
